package me.cutrats110;

import java.util.HashMap;
import java.util.List;
import java.util.UUID;

import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.bukkit.plugin.Plugin;
import org.bukkit.scoreboard.DisplaySlot;
import org.bukkit.scoreboard.Objective;
import org.bukkit.scoreboard.Scoreboard;

public class TeamBoards {
	public Plugin plugin = null;
	public TeamBoards(Plugin plugin){
		this.plugin = plugin;
	}
	private HashMap<String, Scoreboard> boards = new HashMap<>();
	
	//Make scoreboard should be called when team is created...
	public void makeScoreBoard (List<Player> players, String teamName) {
		try {
			Scoreboard board = Bukkit.getScoreboardManager().getNewScoreboard();	
			
			
			Objective teamMembersBoard = board.registerNewObjective("teamhp", "health","hp");	
			teamMembersBoard.setDisplaySlot(DisplaySlot.SIDEBAR);
			teamMembersBoard.setDisplayName("  Team Health  ");		
			
			//Head of champ...
			Objective teamNameBoard = board.registerNewObjective("teamName", "dummy","name");		
			teamNameBoard.setDisplaySlot(DisplaySlot.BELOW_NAME);
			teamNameBoard.setDisplayName(teamName);
			
			
			boards.put(teamName, board);
		}catch(NullPointerException np) {
			plugin.getLogger().info("ME FUCK " + np.getStackTrace().toString());
		}
	}
	
	public void setScoreboard(List<Player> players, String teamName) {
		
		boards.get(teamName);
		for(Player p : players){//Team members only...
			try {
				if(p.isOnline()) {
					teamMembersBoard.getScore(p.getName()).setScore((int) p.getHealth());
					teamNameBoard.getScore(p.getName()).setScore(0);
				}
			}catch(NullPointerException np) {continue;}
		}
		for(Player p : players){//Team members only...
			p.setScoreboard(board);
		}
	}
}
